```yml
name: üîç MySQL Schema Comparison

on:
  pull_request:
    branches: [main]
  workflow_dispatch:
    inputs:
      force_run:
        description: 'Force run schema comparison'
        required: false
        default: 'false'

jobs:
  schema-compare:
    name: Compare Database Schemas
    runs-on: ubuntu-latest
    
    steps:
      - name: üì• Checkout repository
        uses: actions/checkout@v4
        
      - name: üîç Compare MySQL Schemas
        id: schema-check
        uses: dreaminfluencers/MySQL-Schema-Compare@0.0.2
        with:
          # Production/Main database configuration
          main-db-host: ${{ secrets.PROD_DB_HOST }}
          main-db-port: ${{ secrets.PROD_DB_PORT || '3306' }}
          main-db-user: ${{ secrets.PROD_DB_USER }}
          main-db-password: ${{ secrets.PROD_DB_PASSWORD }}
          main-db-name: ${{ secrets.PROD_DB_NAME }}
          main-db-ssl: ${{ secrets.PROD_DB_SSL || 'true' }}
          main-db-ssl-ca: ${{ secrets.PROD_DB_SSL_CA }}
          
          # Development/Staging database configuration
          dev-db-host: ${{ secrets.DEV_DB_HOST }}
          dev-db-port: ${{ secrets.DEV_DB_PORT || '3306' }}
          dev-db-user: ${{ secrets.DEV_DB_USER }}
          dev-db-password: ${{ secrets.DEV_DB_PASSWORD }}
          dev-db-name: ${{ secrets.DEV_DB_NAME }}
          dev-db-ssl: ${{ secrets.DEV_DB_SSL || 'false' }}
          dev-db-ssl-ca: ${{ secrets.DEV_DB_SSL_CA }}
      
      - name: üìä Display Results
        run: |
          echo "## üìä Schema Comparison Results" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- **In Sync**: ${{ steps.schema-check.outputs.is-in-sync }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Missing Tables**: ${{ steps.schema-check.outputs.missing-tables-count }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Missing Columns**: ${{ steps.schema-check.outputs.missing-columns-count }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Different Columns**: ${{ steps.schema-check.outputs.different-columns-count }}" >> $GITHUB_STEP_SUMMARY
          echo "- **Missing Indexes**: ${{ steps.schema-check.outputs.missing-indexes-count }}" >> $GITHUB_STEP_SUMMARY
      
      - name: üí¨ Comment on PR (if differences found)
        if: github.event_name == 'pull_request' && steps.schema-check.outputs.is-in-sync == 'false'
        uses: actions/github-script@v7
        with:
          script: |
            const missingTables = '${{ steps.schema-check.outputs.missing-tables-count }}';
            const missingColumns = '${{ steps.schema-check.outputs.missing-columns-count }}';
            const differentColumns = '${{ steps.schema-check.outputs.different-columns-count }}';
            const missingIndexes = '${{ steps.schema-check.outputs.missing-indexes-count }}';
            
            const body = `## üö® Database Schema Differences Detected
            
            The schema comparison between your development and production databases found differences:
            
            | Category | Count |
            |----------|-------|
            | Missing Tables | ${missingTables} |
            | Missing Columns | ${missingColumns} |
            | Different Columns | ${differentColumns} |
            | Missing Indexes | ${missingIndexes} |
            
            ### üìã Next Steps:
            1. Review the detailed comparison in the [Actions summary](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})
            2. Apply the generated SQL commands to your production database
            3. Re-run this check to verify the changes
            
            ### ‚ö†Ô∏è Important:
            - Review all SQL commands before executing them
            - Consider creating a backup before applying changes
            - Test changes in a staging environment first
            
            ---
            ü§ñ *This comment was automatically generated by the MySQL Schema Compare action*`;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: body
            });
      
      - name: ‚úÖ Success Notification
        if: steps.schema-check.outputs.is-in-sync == 'true'
        run: |
          echo "üéâ Database schemas are in sync!"
          echo "## ‚úÖ Schemas In Sync" >> $GITHUB_STEP_SUMMARY
          echo "Your development and production database schemas match perfectly!" >> $GITHUB_STEP_SUMMARY
      
      - name: ‚ùå Failure Notification
        if: failure()
        uses: actions/github-script@v7
        with:
          script: |
            if (context.eventName === 'pull_request') {
              github.rest.issues.createComment({
                issue_number: context.issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                body: `## ‚ùå Schema Comparison Failed
                
                The database schema comparison encountered an error. Please check the [action logs](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}) for details.
                
                Common issues:
                - Database connection problems
                - Invalid credentials
                - Network connectivity issues
                - SSL/TLS configuration problems
                
                ---
                ü§ñ *This comment was automatically generated by the MySQL Schema Compare action*`
              });
            }

```
